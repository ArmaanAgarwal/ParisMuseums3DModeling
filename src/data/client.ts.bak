// Client-safe data exports (no PATHWAYS to avoid bundling issues)
// This file can be safely imported in client components

import { LEVELS } from "./levels";
import { ZONES } from "./zones";
import { EXHIBITS } from "./exhibits";
import { OBJECTS } from "./objects";
import { Level, Zone, Exhibit, MuseumObject, LevelId } from "./types";

// Re-export types
export type { Level, Zone, Exhibit, MuseumObject, LevelId };

// Helper functions (client-safe)
export function getZonesByLevel(levelId: string): Zone[] {
  return ZONES.filter((z) => z.levelId === levelId);
}

export function getZone(id: string): Zone | undefined {
  return ZONES.find((z) => z.id === id);
}

export function getExhibitsByZone(zoneId: string): Exhibit[] {
  return EXHIBITS.filter((e) => e.zoneId === zoneId);
}

export function getObjectsByExhibit(exhibitId: string): MuseumObject[] {
  return OBJECTS.filter((obj) => obj.exhibitId === exhibitId);
}

export function getObjectsByLevel(levelId: string): MuseumObject[] {
  const zones = getZonesByLevel(levelId);
  const zoneIds = zones.map((z) => z.id);
  const exhibits = EXHIBITS.filter((e) => zoneIds.includes(e.zoneId));
  const exhibitIds = exhibits.map((e) => e.id);
  return OBJECTS.filter((obj) => exhibitIds.includes(obj.exhibitId));
}

export function getFeaturedObjects(count: number = 10): MuseumObject[] {
  const scored = OBJECTS.map((obj) => ({
    object: obj,
    score:
      (obj.description?.length || 0) +
      (obj.significance?.length || 0) +
      (obj.howItChangedPerformance?.length || 0) +
      (obj.whatToNotice?.length || 0) * 10,
  }));
  return scored
    .sort((a, b) => b.score - a.score)
    .slice(0, count)
    .map((item) => item.object);
}

export function getLevel(id: LevelId): Level | undefined {
  return LEVELS.find((l) => l.id === id);
}

export function getObjectBySlug(slug: string): MuseumObject | undefined {
  return OBJECTS.find((obj) => obj.slug === slug);
}

export function getExhibit(id: string): Exhibit | undefined {
  return EXHIBITS.find((e) => e.id === id);
}

// Export data arrays (client-safe, no PATHWAYS)
export { LEVELS, ZONES, EXHIBITS, OBJECTS };

